\documentclass[x11names,reqno,14pt]{extarticle}
\input{preamble}
\usepackage[document]{ragged2e}
\usepackage{amsmath}
\pagestyle{fancy}{
	\fancyhead[L]{Spring 2023}
	\fancyhead[C]{201B - Real Analysis}
	\fancyhead[R]{John White}
  
  \fancyfoot[R]{\footnotesize Page \thepage \ of \pageref{LastPage}}
	\fancyfoot[C]{}
	}
\fancypagestyle{firststyle}{
     \fancyhead[L]{}
     \fancyhead[R]{}
     \fancyhead[C]{}
     \renewcommand{\headrulewidth}{0pt}
	\fancyfoot[R]{\footnotesize Page \thepage \ of \pageref{LastPage}}
}

\newcommand{\seq}[2][\oo]{_{#2 = 1}^#1}
\newcommand{\barr}{{\bar{\R}}}
\newcommand{\cupk}[1][\oo]{\cup\seq[#1]{k}}
\newcommand{\cupi}[1][\oo]{\cup\seq[#1]{i}}
\newcommand{\cupn}[1][\oo]{\cup\seq[#1]{n}}
\newcommand{\bigcupk}[1][\oo]{\bigcup\seq[#1]{k}}
\newcommand{\bigcupi}[1][\oo]{\bigcup\seq[#1]{i}}
\newcommand{\bigcupn}[1][\oo]{\bigcup\seq[#1]{n}}
\newcommand{\capk}[1][\oo]{\cap\seq[#1]{k}}
\newcommand{\capi}[1][\oo]{\cap\seq[#1]{i}}
\newcommand{\capn}[1][\oo]{\cap\seq[#1]{n}}
\newcommand{\bigcapk}[1][\oo]{\bigcup\seq[#1]{k}}
\newcommand{\bigcapi}[1][\oo]{\bigcup\seq[#1]{i}}
\newcommand{\bigcapn}[1][\oo]{\bigcup\seq[#1]{n}}
\DeclareMathOperator{\Vol}{Vol}
\DeclareMathOperator{\diam}{diam}
\title{220A - Groups}
\author{John White}
\date{Fall 2022}




\begin{document}

\section*{Lecture 1}

Let $(X, \mc{A}, \mu)$ be a measure space. Without any additional structure or information, we may define the Lebesgue integral $\int_Xf\,d\mu$ for $f$ an $\mc{A}-\mc{B}$ measurable function $f:X\to[-\oo,+\oo]$. 

We only have a few examples without any work. 

\exm

\begin{itemize}

\item For any set $X$, we can define the counting measure on $\mc{A} = 2^X$, which gives $\mu(A) = |A|$. If $X = \N$, then a measurable function is just a sequence $(f_n)$, and $\int_Xf\,d\mu = \sum f_n$

\item We can also define the Dirac mass $\delta_p$ for a fixed $p \in X$ by 
\[
\delta_p(E) = \begin{cases} 1 & p \in E \\ 0 & p \not\in E\\ \end{cases}
\]
We have $\int_Xf\,d\delta_p = f(p)$

\end{itemize}

To get another example of a measure we need to do some work. 

\underline{Problem:} We want a measure $\mu$ on $\R^n$ such that, for a rectangle, 
\[
\mu([a_1,b_1]\times\cdots\times[a_n, b_n]) = |a_1 - b_1|\cdots|a_n - b_n|
\]
Once it is defined on all rectangles, it is defined on the minimal $\sigma$-algebra containing them, which is the Borel $\sigma$-algebra. In other words, this condition will completely specify a measure on the Borel $\sigma$-algebra $\mc{B}_{\R^n}$

If $X = \R^n$, or a general metric space, or even a general topological space, then $\mc{B}(X)$ denotes the $\sigma$-algebra generated by the open subsets of $X$. 

\underline{Problem:} 

Suppose we have a distribution function $F:\R\to\R$, meaning $F$ is monotone, positive, and $\lim_{x\to-\oo}f(x) = 0, \lim_{x\to\oo}f(x) = 1$, and continuous from the right. We want a Borel measure $\mu$ such that $F(t) = \mu((-\oo, t])$. Such a measure, denoted by $\lambda_F$, is called a Lebesgues-Stieltjes measure. 

The corresponding integral is called a Lebesgue-Stieltjes integral.

If $F$ is smooth, then $\int_{\R}\phi\,d\lambda_F = \int_{-\oo}^{\oo}\phi(x)d\,F(x)$.

The measure we want on $\R^n$ is denoted by $\lambda^n$. 

\subsection*{\underline{The Carath\'eodory Construction}}

Suppose we have an outer measure $\gamma:2^X\to[0,\oo]$. This means $\gamma(\varnothing) = 0$, $A \subset B \implies \gamma(A) \leq \gamma(B)$ (monotone), and $\gamma(\cup\seq{i}E_i) \leq \sum\seq{i}\gamma(E_i)$ (subadditive).

We can define a set $S$ to be $\gamma$-measurable if for every testing set $T$, $\gamma(T) = \gamma(S \cap T) + \gamma(S^c \cap T)$.

\thm (Carath\'eodory Extension Theorem)

\begin{enumerate}

\item $\gamma(N) = 0 \implies N$ is measurable. 

\item The set of measurable sets forms a $\sigma$-algebra $\Gamma$. 

\item $\gamma$ restricted to $\Gamma$ forms a measure. 

\end{enumerate}

``Nothing in the above theorem can guarantee you that $\Gamma$ is not trivial, i.e. $\Gamma = \{\varnothing, X\}$. Nevertheless, this is a very useful guy" - Dennis. 

\defn (Lebesgue outer measure on $\R^n$)

Let $R$ be a rectangle in $\R^n$, that is $R = \prod_{i=1}^n[a_i, b_i]$. We have $\Vol(R) = |a_1 - b_1|\cdots|a_n - b_n|$. For any $E \subseteq\R^n$, we define
\[
\mu^*(E) \eqdef \inf\{\sum\seq{j}\Vol(R_j) \mid E \subseteq \cup\seq{j}R_j\}
\] 

\prop

$\mu^*$ is an outer measure on $\R^n$ such that $\mu^*(R) = \Vol(R)$ for all rectangles $R$. 

\proof

The first and second axioms are trivial, so we will just prove the subadditivity. Let $E$ be some set. By definition, for any $\varepsilon$, there is some cover $R_j$ by recrtangles such that 
\[
-\varepsilon + \sum\seq{j}\Vol(R_j) \leq \mu^*(E) \leq \sum\seq{j}\Vol(R_j)
\]
meaning that $\sum\seq{j}\Vol(R_j) \leq \mu^*(E) + \varepsilon$. So for each $E_k$, there is a sequence $R^k_j$ which covers $E_k$, such that $\sum\seq{j}\Vol(R^k_j) \leq \mu^*(E) + \frac{\varepsilon}{2^k}$. 

So $\{R^k_j\}_{j, k \in \N}$ forms a cover of $\cup\seq{j}E_j$. Thus

\begin{align*}
\mu^*(\cup\seq{k}E_k) & \leq \sum\seq{k}\sum\seq{j}\Vol(R_j^k) \\
& \leq \sum\seq{k}\left(\mu^*(E_k) + \frac{\varepsilon}{2^k}\right) \\
& = \sum\seq{k}\mu^*(E_k) + \varepsilon
\end{align*}
This is true for any positive $\varepsilon$. Taking the limit as $\varepsilon\to0$ gives the result. 

\qed

Now, fix a rectangle $R$. Note that $R$ itself forms a cover of $R$, so by the definition, $\mu^*(R) \leq \Vol(R)$. For $\varepsilon > 0$, we can take an almost-optimal cover $(R_j)$ such that $\sum\seq{j}\Vol(R_j) \leq \Vol(R) + \varepsilon$. We can rig it such that $|\Vol(R_j) - \Vol(R)| \leq \frac{\varepsilon}{2^j}$.  Because $R \subset\cup\seq{j}R_j$, and $R_j$ is an open cover, by compactness of $R$ there is a finite subcover, and the volume of $R$ is less than or equal to the sum of the volumes of these finitely many $R_j$. So the volume of $R$ is less than or equal to $\mu^*(R) + 2\varepsilon$. So $\Vol(R) = \mu^*(R)$.

\prop 

Every rectangle $R$ in $\R^n$ is Carath\'eodory measurable). 

\proof

I missed this lol. Apparently Dennis denotes $\mc{M}_{\lambda^*}$ by $\ms{L}^n$.

\qed

\defn

A set is said to be \underline{$G_\delta$} if it is the countable intersection of open sets. A set is said to be \underline{$F_\sigma$} if it is the countable union of closed sets. 

\thm

\begin{enumerate}

\item For all $E \in \ms{L}^n$, $\lambda^N(E) = \inf\{\lambda^n(O) \mid \text{open }O\supseteq E\}$. 

\item $E \in \ms{L}^n$ if and only if $E = H\setminus Z$, where $H$ is $G_\delta$, and $\lambda^*(Z) = 0$. 

\item $E \in \ms{L}^n$ if and only if $E = H \cup Z$, where $H$ is $F_\sigma$ and $\lambda^*(Z) = 0$. 

\item $\lambda^n(E) = \sup\{\lambda^n(C) \mid \text{closed }C \subseteq E\}$

\end{enumerate}

\proof

It suffices to prove the first statement, as the others will follow by passing to a complement. 

\qed

\defn

Suppose $X$ is a metric space. A measure on $X$ is a \underline{Radon measure} if it is Borel (meaning defined on a $\sigma$-algebra containing Borel sets), and for any Borel $E$, $\mu(E) = \inf\{\mu(O) \mid \text{open }O \supseteq E\}$, and for any compact $C\subseteq X$, $\mu(C)<\oo$. 

\thm (Riesz)

Let $X \subseteq \R^n$ be compact. Let $C(X)$ denote the vector space of all continuous functions on $X$. This admits a norm $\norm{f}_{C(X)} = \sup_X|f|$, making it a Banach space. Define $C^*(X) = \{\phi:C(X)\to\R, \phi$ is linear and continuous $\}$. 

For all $\phi \in C^*(X)$, there exists a Radon measure $\mu = \mu_+$, and a function $M:X\to\{\pm1\}$ which is Borel, such that
\[
\phi(f) = \int_Xf(x)M(x)\,d\mu(x)
\]
for all $f \in C(X)$. 

\proof

\qed

\section*{Lecture 2, 1/17/23}

Note: This is the first lecture with Davit. Davit will always use $\mu$ to refer to an \underline{outer} measure, not a measure. The book will be ``Measure theory and fine properties of functions." According to Davit, this is the correct book to be using. 

\defn 

Let $X$ be a nonempty set. A mapping $\mu:2^X\to[0,+\oo]$ is called a \underline{measure} if it satisfies the following 2 properties.

\begin{enumerate}
\item $\mu(\varnothing) = 0$. 
\item (Countable subadditivity and monotonicity) If $A, A_1, A_2, \dots \subseteq X$ and $A \subseteq \cup\seq{i}A_i$ then $\mu(A)\leq\sum\seq{i}\mu(A_i)$
\end{enumerate}

\rem From the second definition, we can automatically get monotonicity, i.e. if $A\subseteq B$, then $\mu(A)\leq\mu(B)$. This is because, as written, the second definition is a statement not just about $\cup\seq{i}A_i$, but about any subset of it. Indeed, let $A = A, A_1 = B$, and $A_k = \varnothing$ for $k\geq 2$. Then we have $\mu(A)\leq\mu(\cup\seq{i}A_i) = \mu(A\cup B)$. 

We will write ``$\mu$ is a measure on $X$" to mean that $\mu$ satisfies the above definition (that is, $\mu$ is an outer measure).

\defn

Let $X$ be a nonempty set and let $\mu$ be a measure on $X$. For a fixed set $C\subseteq X$, define the \underline{restriction measure} $\nu = \mu|_C$ by $\nu(A) = \mu|_A(A) = \mu(A\cap C)$.

\rem It is easy to prove that $\mu|_C$ is a measure on $X$. 

\defn (Carath\'eodory's condition). Let $X$ be a nonempty set and let $\mu$ be a measure on $X$. A subset $A\subseteq X$ is called \underline{$\mu$-measurable} if, for all subset $B\subseteq X$, we have
\[
\mu(B) = \mu(B \cap A) + \mu(B \setminus A)
\]

\rem $X$ and $\varnothing$ are easily seen to be $\mu$-measurable. 

\thm (Carath\'eodory extension theorem)

The collection of $\mu$-measurable sets on a set $X$ is a $\sigma$-algebra.

\thm Let $X$ be a nonempty set and let $\mu$ be a measure on $X$. Then the following holds: 

\begin{enumerate}
\item $\varnothing$ and $X$ are $\mu$-measurable.
\item $A \subseteq X$ is $\mu$-measurable if and only if $X \setminus A$ is $\mu$-measurable.
\item If $A\subseteq X$ is such that $\mu(A) = 0$, then $A$ is $\mu$-measurable. 
\item Let $C \subseteq X$. Then anything which is $\mu$-measurable is $\mu|_C$-measurable. 
\end{enumerate}

\rem

A measure is also finitely subadditive, which says that if $A \subseteq A_1 \cup \cdots \cup A_n$, then $\mu(A) \leq \sum_{i=1}^n\mu(A_i)$. So, to check that $\mu(B) = \mu(B \cap A) + \mu(B\setminus A)$, it will suffice to check
\[
\mu(B)\geq\mu(B\cap A) + \mu(B\setminus A)
\]

\proof

Part 1 is obvious. 

Suppose that $A$ is $\mu$-measurable. Then $\mu(B\cap A) = \mu(B \setminus A^c)$ and $\mu(B\cap A^c) = \mu(B\setminus A)$ so $\mu(B \cap A) + \mu(B\setminus A) = \mu(B \cap A^c) + \mu(B\setminus A^c)$. So $A$ is $\mu$-measurable if and only if $A^c$ is.

Suppose that $\mu(A) = 0$. Then $\mu(B\cap A) \leq \mu(A), \mu(B)$, so $\mu(B\cap A) = 0$ for any $B\subseteq X$. Now, $B\setminus A \subseteq B$, so by monotonicity $\mu(B\setminus A)\leq\mu(B)$. So $\mu(B \cap A) + \mu(B\setminus A) \leq \mu(B)$ for all $B \subseteq X$, so we are done. 

Let $A$ be $\mu$-measurable. Then for any $B\subseteq X$ we have 
\begin{align*}
\nu(B) & = \mu|_C(B) = \mu(B \cap C) \\
		 & = \mu((B\cap C) \cap A) + \mu((B\cap C)\setminus A) \\
		 & = \nu(B \cap A) + \mu((B\setminus A) \cap C)\\
		 & = \nu(B \cap A) + \nu(B\setminus A) \\
\end{align*}

\qed

\thm

Let $X$ be a nonempty set and let $\mu$ be a measure on $X$. 

Assume $A_1, A_2, \dots, A_n\subseteq X$ are $\mu$-measurable. Then
\begin{enumerate}
\item $\bigcup_{k=1}^n A_k$ and $\bigcap_{i=1}^nA_k$ are also $\mu$-measurable. 
\item If the $A_i$ are disjoint, then $\mu(\bigcup_{i=1}^nA_i = \sum_{i=1}^n\mu(A_i)$
\end{enumerate}

\proof

We prove part 2 first. Because each $A_i$ is measurable, 
\begin{align*}
\mu(\cup_{k=1}^nA_k) & = \mu((\cup_{k=1}^nA_k)\cap A_n) + (\mu(\cup_{k=1}^nA_k) \setminus A_n) \\
& = \mu(\cup_{i=1}^{n - 1}A_k) + \mu(A_n) = \cdots = \sum_{k=1}^n\mu(A_k) \\
\end{align*}

Now we prove part 1. Let $A, B \subseteq X$ be $\mu$-measurable and disjoint. Then for any $C\subseteq X$, $\mu(C) = \mu(C \cap A) + \mu(C\setminus A)$, and similarly for $B$. This is equal to 

\begin{align*}
\mu(C) & = \mu(C \cap A) + \mu((C\setminus A) \cap B) + \mu(C\setminus A \setminus B) \\
		 & = \mu(C\cap A) + \mu(C\cap B) + \mu(C\setminus(A\cup B)) + \mu(C\cap(A\cup B)) (?)\\
		 & = \mu(C \cap (A \cup B) \cap A) + \mu(C \cap (A \cup B) \setminus A) \\
		 & = \mu(C \cap A) + \mu(C\cap B) \\
		 & = \mu(C \cap (A \cup B)) + \mu(C\setminus(A \cup B))
\end{align*}

So $A \cup B$ is $\mu$-measurable. (I got a bit lost in the arithmetic, sorry)

Next, we show if $A, B\subseteq X$ are $\mu$-measurable, then $A \cap B$ is $\mu$-measurable. This is straightforward. We will continue next time. 

\section*{Lecture 3, 1/19/23}

We will continue our proof of the theorem. Assume $A, B \subseteq X$ are $\mu$-measurable. We aim to show that $A \cap B$ is also $\mu$-measurable. We need to show that, for any $C \subseteq X$, we have $\mu(C) = \mu(C\cap(A\cap B)) + \mu(C\setminus(A\cap B))$. Because $A$, $B$ are $\mu$-measurable, we have
\begin{align*}
\mu(C) &  = \mu(C \cap A) + \mu(C\setminus A) \\
		 & = \mu((C\cap A) \cap B) + \mu((C\cap A) \setminus B) + \mu(C\setminus A) \\
		 & = \mu(C\cap (A \cap B)) + \mu((C\cap A) \setminus B) + \mu(C\setminus A) \\
		 & \geq \mu(C\cap (A \cap B)) + \mu(C\setminus(A \cap B))
\end{align*}
The opposite inequality follows by subadditivity, so we have equality. 

By induction, we get that also $\cap_{k=1}^n A_k$ is $\mu$-measurable. For the union, we can get it using the fact that $\cup_{k=1}^nA_k = X \setminus \cap_{k=1}^nA_k$.

\qed

\rem If $A, B$ are $\mu$-measurable, then $A \setminus B$ is $\mu$-measurable. This follows from $A \setminus B = A \cap (X \setminus B)$

\thm 

Let $X$ be a nonempty set, and $\mu$ a measure on $X$. Assume $\{A_k\}\seq{k}\subseteq X$ are $\mu$-measurable. Then
\begin{enumerate}
\item If the $A_k$ are disjoint, then we have countable additivity:
\[
\mu\left(\cup\seq{k}A_k\right) = \sum\seq{k}\mu(A_k)
\]
\end{enumerate}
\item If $A_1 \subseteq A_2 \subseteq \cdots$, then 
\[
\lim_{k\to\oo}\mu(A_k) = \mu\left(\bigcup\seq{k}A_k\right)
\]
\item If $A_1 \supseteq A_2 \supseteq \cdots$, and $\mu(A_1) < \oo$, then 
\[
\lim_{k\to\oo}\mu(A_k) = \mu\left(\bigcap\seq{k}A_k\right)
\]


\proof

We have from before that if the $A_k$ are pairwise disjoint, then $\mu(\cup_{k=1}^nA_k) = \sum_{k=1}^n\mu(A_k)$ for any $n \in \N$. Because $\cup_{k=1}^nA_k \subseteq \cup\seq{k}A_k$, we must have that $\mu(\cup_{k=1}^nA_k) \leq \mu(\cup\seq{k}A_k)$. Using the previous fact, and passing to a limit, we have
\[
\sum\seq{k}\mu(A_k) \leq \mu(\cup\seq{k}A_k)
\]
The opposite equality is automatically true by the countable subadditivity of $\mu$, so we get equality. This completes the proof of 1. Now for part 2. 

Define $B_k = A_k \setminus A_{k - 1}$, where $A_0 \eqdef \varnothing$. We have $A_k = \cup_{i=1}^kB_i$. Note that the $B_i$ are disjoint. So we have
\[
\mu(A_k) = \sum_{i=1}^k\mu(B_i)
\]
So, in the limit, 
\[
\lim_{k\to\oo}\mu(A_k) = \lim_{k\to\oo}\sum_{i=1}^k\mu(B_i) = \sum\seq{i}\mu(B_i)
\]
So
\[
\mu(\cup\seq{i}B_i) = \mu(\cup\seq{k}A_k)
\]

Finally, let $A_1 \supseteq A_2 \supseteq \cdots, \mu(A_1)<\oo$. Define $B_k = A_1\setminus A_k$. This is decreasing sequence of $\mu$-measurable sets, so by the previous part, 
\[
\lim_{k\to\oo}\mu(B_k) = \mu(\cup\seq{k}B_k)
\]
So
\begin{align*}
\mu(B_k) = \mu(A_1\setminus A_k)  = \mu(A_1) - \mu(A_k) \implies \\
\lim_{k\to\oo}\mu(B_k) = \lim_{k\to\oo}(\mu(A_1) - \mu(A_k)) & = \mu(A_1) - \lim_{k\to\oo}\mu(A_k) \\
= \mu(\cup\seq{k}B_k) = \mu(\cup\seq{k}(A_1 \setminus A_k)) & = \mu(A_1 \setminus \cap\seq{k} A_k) \\
\geq \mu(A_1) - \mu(\cap\seq{k}A_k) & \\
\end{align*}

So $\lim_{k\to\oo}\mu(A_k) \leq \mu(\cap\seq{k}A_k)$. The opposite inequality follows easily by monotonicity. 

\qed

We are ready to prove the Carath\'eodory extension theorem. 

\proof

Let $A_1, A_2, \dots \subseteq X$ be $\mu$-measurable. It will suffice to prove that $\cup\seq{k}A_k$ is $\mu$-measurable. So we need to check that, for any $B$, 
\[
\mu(B) = \mu(B\cap (\cup\seq{k}A_k)) + \mu(B \setminus \cup\seq{k}A_k)
\]
Fix $B \subseteq X$, and consider $\nu = \mu|_B$. Recall this is defined as $\nu(C) = \mu(B \cap C)$. We would like 
\[
\nu(B) = \nu(\cup\seq{k}) + \nu(B \setminus \cup\seq{k}A_k)
\]
To this end, 
\begin{align*}
\nu(\cup\seq{k}A_k) & = \lim_{k\to\oo}\nu(\cup_{i=1}^kA_i) \\
\end{align*}
Without loss of generality, $\nu(B)<\oo$. If $\nu(B) = \oo$, then we are done trivially. 

As before, define $B_k = B\setminus \cup_{i=1}^kA_i$. Then
\[
\nu(B\setminus\cup\seq{k}A_k) = \lim_{k\to\oo}\nu(B\setminus\cup_{i=1}^kA_i)
\]
So, 
\begin{align*}
\nu(\cup\seq{k}A_k) + \nu(B\setminus\cup\seq{k}A_k) & = \lim_{k\to\oo}\left(\nu(\cup_{i=1}^kA_i) + \nu(B\setminus\cup_{i=1}^kA_i)\right) \\
& = \lim_{k\to\oo}\nu(B) = \nu(B) \\
\end{align*}
so we are done. 

\qed

\defn

Let $X$ be a nonempty set, and let $\mu$ be a measure on $X$. Then $\mu$ is said to be 
\begin{enumerate}
\item A \underline{regular measure} if, for any $A \subset X$, there exists a $\mu$-measurable $B\subseteq X$ such that $A \subseteq B$, and $\mu(A) = \mu(B)$. 
\item A \underline{Borel measure} if all Borel sets (i.e. the elements of the Borel $\sigma$-algebra) are measurable. This only applies if $X$ is also a topological space, of course. 
\item A \underline{Borel-regular measure} if $\mu$ is Borel, and for any $A \subseteq X$, there exists a Borel set $B \subseteq X$ such that $A \subseteq B$ and $\mu(A) = \mu(B)$. 
\item A \underline{Radon measure} if it is Borel-regular and $\mu(K)<\oo$ if $K$ is compact. 
\end{enumerate}

\rem

Note that being Borel and regular is weaker than being Borel-regular. 

\thm (Increasing sets \underline{for regular measures})
Let $X$ be a nonempty set, and let $\mu$ be a regular measure on $X$. Assume $A_1\subseteq A_2 \subseteq \cdots \subseteq X$. Then 
\[
\lim_{k\to\oo}\mu(A_k) = \mu\left(\bigcupk A_k\right)
\]

\rem The sets $A_k$ need not be $\mu$-measurable. 

\proof

For all $A_k$, there is a $C_k\subseteq X$ which is $\mu$-measurable, $A_k \subseteq C_k$, and $\mu(A_k) = \mu(C_k)$. Let $D_k = \cap_{i\geq k}C_i$. For $i \geq k$, we can see $A_k \subseteq A_i \subseteq C_i$. $A_k \subseteq \cup_{i\geq k}C_i = D_k$, then $\mu(A_k)\leq\mu(D_k)$. On the other hand, $D_k\subseteq C_k$, so $\mu(D_k)\leq\mu(C_k) = \mu(A_k)$. So
\begin{itemize}
\item $\mu(A_k) = \mu(D_k)$ 
\item $A_k \subseteq D_k$ 
\item $D_k$ is $\mu$-measurable and $D_1 \subseteq D_2 \subseteq \cdots $
\end{itemize}
So
\begin{align*}
\lim_{k\to\oo}\mu(A_k) & = \lim_{k\to\oo}\mu(D_k) \\
						      & = \mu\left(\bigcupk D_k\right) \\
								& \geq \mu\left(\bigcupk A_k\right) \\
\end{align*}
Because $\cupk A_k \subseteq \cupk D_k$, 
\[
\lim_{k\to\oo}\mu(A_k)\geq\mu\left(\bigcupk A_k\right) 
\]
But $A_k \subseteq \cupk A_k$, so the opposite inequality is also true, so we have equality. 

\qed

\section*{Lecture 4, 1/24/23}

\thm (Restriction and Radon measures)

Let $X$ be a topological space and let $\mu$ be a Borel-regular measure on $X$. Let $A \subseteq X$ be $\mu$-measurable with $\mu(A)<\oo$. Then the restriction measure $\nu = \mu|_A$ is Radon. 

\proof

First, $\nu$ is a finite measure, as $\nu(X) = \mu(A \cap X) = \mu(A) < \oo$ for any $C \subseteq X$. 

It is clear that $\nu$ is Borel, as $\mu$ is Borel. Next, we show $\nu$ is Borel-Regular. Without loss of generality, we may assume that $A$ is Borel, because $\mu$ is Borel-regular. Explicitly, we know there is a Borel set $B \subseteq X$ such that $A \subseteq B$ and $\mu(B) = \mu(A)$. We will show $\mu|_A = \mu|_B$. 

We have $\mu(B) = \mu(B \cap A) + \mu(B \setminus A) = \mu(A) + \mu(B \setminus A)$. So $\mu(B\setminus A) = 0$. 

So, for all $C \subseteq X$, 
\begin{align*}
\mu|_B(C) & = \mu(B \cap C)\\
			  & = \mu((B\cap C)\cap A) + \mu((B \cap C) \setminus A) \\
			  & = \mu(C \cap A) + \mu((B \cap C) \setminus A ) \\
			  & \leq \mu|_A(C) + \mu(B\setminus A) \\
			  & = \mu|_A(C) \\
\end{align*}
But $(A \cap C) \subseteq (B \cap C)$, so $\mu|_A(C) \leq \mu|_B(C)$, so we may conclude that $\mu|_A = \mu|_B$. 

So assume $A$ is Borel. Fix $C \subseteq X$. We need to prove that there exists a Borel $D\subseteq X$ such that $C\subseteq D$ and $\nu(C) = \nu(D)$. There exists a Borel $E \subseteq X$ such that $C \cap A \subseteq E$, and $\mu(C \cap A) = \mu(E)$. So $D = E \cup (X\setminus A)$ is Borel and $C \subseteq D$. 

So 
\begin{align*}
\nu(D) & = \mu((E\cup(X\setminus A))\cap A)\\ &  = \mu(E \cap A) \\ & \leq\mu(E) \\
& = \mu(C\cap A) \\
& = \nu(C) \\
\end{align*}
$C \subseteq D$ so $\nu(C)\leq\nu(D)$, so $\nu(C)=\nu(D)$.

\qed

\thm (Carath\'eodory Criterion for being Borel) 

Let $X$ be a metric space and let $\mu$ be a measure on $X$. Then $\mu$ is Borel if and only if, for all $A, B \subseteq X$ with $d(A, B) > 0$ (meaning $\inf\{d(a, b) \mid a \in A, b \in B\} > 0$), 
\[
\mu(A \cup B) = \mu(A) + \mu(B)
\]

\proof

\subsection*{$=>$}

Suppose $\mu$ is Borel. We will use $\bar{B}$ to denote the closure of $B$. Then $d(A,\bar{B}) = d(A, B) > 0$. By measurability of $\bar{B}$, 
\[
\mu(A \cup B) = \mu((A \cup B) \cap \bar{B}) + \mu((A \cup B) \setminus \bar{B}) = \mu(B) = \mu(A)
\]

\subsection*{$<=$}

Suppose that, for $A, B$ with $d(A, B) > 0$, $\mu(A \cup B) = \mu(A) + \mu(B)$. We will show that this implies $\mu$ is Borel. Let us show that every closed subset $C\subseteq X$ is $\mu$-measurable. So we have to prove that for every $A \subseteq X$, 
\[
\mu(A) = \mu(A \cap C) + \mu(A\setminus C)
\]
We have $\leq$ trivially. Assume $\mu(A)<\oo$; otherwise, this equality holds trivially. 

Define for every $n \in \N$ the set $C_n = \{x\in X \mid d(x, C) \leq \frac{1}{n}\}$. We can see $d(A\setminus C_n, C) \geq \frac{1}{n} > 0$. So
\begin{align*}
\mu({(A\setminus C_n)\cup (A \cap C)}_{\subseteq A}) & = \mu(A \setminus C_n) + \mu(A \cap C) \\
& \leq \mu(A)\\
\end{align*}
SO $\mu(A \setminus C_n) + \mu(A \cap C) \leq \mu(A)$ for all $n \in \N$. We will prove that $\lim_{n\to\oo}\mu(A\setminus C_n) = \mu(A \setminus C)$. 

Consider the annuli $R_n = \{x \in A \mid \frac{1}{n + 1} < d(x, C) \leq \frac{1}{n}$. We have
\[
(A\setminus C_1) \bigcupn R_n \subseteq A \setminus C
\]
$C$ is closed, so in fact we have equality above. Why? If a point belongs to $A \setminus C$, then it does not belong to $C$, so $d(x, C) > 0$. So there is an $n\in\N$ such that $x \in R_n$ or $x \in A \setminus C_1$. We have
\begin{align*}
\mu\left(\bigcup_{k=0}^nR_{2k + 1}\right) & = \sum_{k=0}^n\mu(R_{2k + 1})  \leq \mu(A) \\
\mu\left(\bigcup_{k=1}^nR_{2k}\right) & = \sum_{k=1}^n\mu(R_{2k}) \leq \mu(A) \\
\end{align*}

So $\sum\seq{n}\mu(R_n) \leq 2\mu(A)<\oo$, so $\lim_{n\to\oo}(\sum_{k=n}^\oo\mu(R_k)) = 0$. So $(A \setminus C_n) \bigcup_{k=n}^\oo R_k = A \setminus C$

So by subadditivity, 
\[
\mu(A\setminus C) \leq \mu(A\setminus C_n) + \sum_{k=n}^\oo\mu(R_k)
\]
So as $n\to\oo$, 
\[
\mu(A \setminus C) \leq \liminf_{n\to\oo}\mu(A\setminus C_n) \leq \mu(A \setminus C)
\]
This completes the proof. 

It is time for our third section. 

\subsection*{\underline{Approximation by open, closed, and compact sets}}

\thm Let $\mu$ be a Borel measure on $\R^n$, and let $B \subseteq \R^n$ be a Borel set. 

\begin{enumerate}

\item If $\mu(B)<\oo$, then for any $\varepsilon>0$, there exists a closed $C \subseteq B$ such that $\mu(B\setminus C) < \varepsilon$. 

\item If $\mu$ is a Radon measure, then for all $\varepsilon>0$, there exists an open $U \supseteq B$ such that $\mu(U\setminus B) < \varepsilon$. 

\end{enumerate}

\proof

\begin{enumerate}

\item Let $\nu = \mu|_B$, a finite measure on $\R^n$. 

Define the collection $\ms{F} = \{A\subseteq\R^n\mid A$ is $\mu$-measurable and for all $\varepsilon > 0, $ there exists a closed $C \subseteq  A$ such that $\mu(A\setminus C) < \varepsilon \}$

Our goal is to show that $\ms{B}_{\R^n}\subseteq\ms{F}$. Davit uses ``$\sigma_B$" to indicate the Borel $\sigma$-algebra. 

By previous discussion, $\ms{F}$ contains all closed sets. 

Now, if $A_1, A_2, \dots \in \ms{F}$, then $\bigcapk A_k\in\ms{F}$. For all $A_k$, there exists a closed $C_k \subseteq A_k$, such that $\nu(A_k\setminus C_k) < \frac{\varepsilon}{2^k}$. Then by subadditivity, 
\[
\nu(\bigcapk A_k \setminus \bigcapk C_k) \leq \nu(\bigcupk(A_k \setminus C_k)) \leq \sum\seq{k}\nu(A_k\setminus C_k) < \varepsilon
\]
and $C = \bigcapk C_k$ is closed. 


\end{enumerate}

\section*{Lecture 5, 1/26/23}

\thm 

Let $\mu$ be a Borel measure on $\R^n$ and let $B \subseteq \R^n$ be a Borel set. 
\begin{enumerate}

\item If $\mu(B)<\oo$, then for all $\varepsilon>0$, there exists a closed $C \subseteq B$ such that $\mu(B\setminus C) < \varepsilon$. 

\item If $\mu$ is a Radon measure, then for all $\varepsilon>0$, there exists an open $U \subseteq \R^n$ such that $B \subseteq U$ and $\mu(U\setminus B)<\varepsilon$. 

\end{enumerate}

\proof
\,
\begin{enumerate}

\item Let $\nu = \mu|_B$ be a finite Borel measure on $\R^n$.  Define the collection
\[
\ms{F} = \{A\subseteq \R^n:A \mu-\text{measurable and for all }\varepsilon>0,\exists C \subseteq A, C\text{ closed, }\nu(A\setminus C)<\varepsilon\} 
\]
We want to show $\mc{B} \in \ms{F}$, where $\mc{B}$ is the Borel set. 

\subsubsection*{Step 1:} $\ms{F}$ contains all closed sets

\subsubsection*{Step 2:} If $A_1, A_1, \dots, A_k \in \ms{F}$, then for all $A_k$, there exists a closed $C_k$ such that $\nu(A_k\setminus C_k)<\frac{\varepsilon}{2^k}$. Thus, 
\begin{align*}
\nu\left(\bigcapk A_k\setminus \bigcapk C_k\right) & \leq \nu\left(\bigcupk(A_k\setminus C_k)\right) \\
& \leq \sum_{k=1}^\oo\nu(A_k\setminus C_k) < \varepsilon \\
\end{align*}
Furthermore, $\capk C_k$ is closed. Thus $\ms{F}$ is closed under countable intersections. 

\subsubsection*{Step 3:} We want to show countable unions belong to $\ms{F}$. If $A_1, A_2, \dots, A_k, \dots \in \ms{F}$, then for all $A_k$, there is a closed $C_k$ such that $\nu(A_k\setminus C_k)<\frac{\varepsilon}{2^k}$. However, we do not know if $\cupk C_k$ is closed. Note that $\nu(\cupk A_k \setminus \cupk C_k) = \lim_{m\to\oo}\nu(\cup_{k=1}^m A_k \setminus \cup_{k=1}^m C_k) < \varepsilon$. So there is an $m \in \N$ such that $\nu(\cup_{k=1}^m A_k \setminus \cup_{k=1}^m C_k) < \varepsilon$. Furthermore $C = \cupk[m]C_k$ is closed. 

\subsubsection*{Step 4:} In the homework, we showed that every open set is the countable union of closed balls. Since $\ms{F}$ contains all closed sets, and is closed under countable unions, $\ms{F}$ contains all open sets. 

\subsubsection*{Step 5:} Consider the subset $G \subseteq\ms{F}$ given by $G = \{A\in\ms{F}\mid A^c\in\ms{F}\}$. We claim that $G$ is a $\sigma$-algebra. Going through the axioms, 
\begin{enumerate}[label=(\roman*)]

\item Clearly, $\varnothing\in G$. 

\item If $A \in G, A^c \in G$. 

\item If $A_1, A_2, \dots, A_k, \dots \in G$, then $\cupk A_k \in G$. Why? $\cupk A_k \in \ms{F}$ and $\R^n\setminus\capk(\R^n\setminus A_k) \in\ms{F}$, since each $\R^n\setminus A_k \in \ms{F}$, and $\ms{F}$ is closed under countable intersections. 

\end{enumerate}

\subsubsection*{Step 6:} Since the complement of an open sets is a closed set, and since $\ms{F}$ contains all open and closed sets, all open sets are contained in the $\sigma$-algebra $G$. Thus the Borel sets are contained in $G$, implying that they are contained in $\ms{F}$. 

Note: Part 1 requires that $X$ be a seperable metric space. 

\item For all $m \in \N$, denote $U_m = B_m(0) = \{x\in\R^n\mid\norm{x}<m\}$. 


Note that $\mu(U_m\setminus B) \leq \mu(U_m) < \oo$. Thus there exists a closed $C_m \subseteq U_m\setminus B$ such that $\mu((U_m\setminus B)\setminus C_m)<\frac{\varepsilon}{2^m}$. 

Note that $B \cap U_m \subseteq (U_m\setminus C_m)$, which is an open set. 

Thus, $\mu((U_m\setminus C_m)\setminus(B\cap U_m)_ = \mu((U_m\setminus C_m)\setminus B_ < \frac{\varepsilon}{2}$. 

Define $U = \cup\seq{m}(U_m\setminus C_m)$, which is an open set. 

Thus $B = \cup\seq{m}(B\cap U_m) \subseteq \cup\seq{m}(U_m\setminus C_m) = U$. 

Furtheremore,
\begin{align*}
\mu(U\setminus B) & = \mu(\cup\seq{m}(U_m\setminus C_m) \setminus \cup\seq{m}(B \cap U_m)) \\
& \leq \mu(\cup\seq{m}(U_m\setminus C_m \setminus B \cap U_m)\\
& \leq \sum\seq{m}\mu(U_m\setminus C_m\setminus B\cap U_m) \\
& < \varepsilon \\
\end{align*}

Note: Part 2 requires that for all $r>0$, for all $x \in X$, $\mu(B_r(x))<\oo$. 




\end{enumerate}

\qed

\thm (Approximation by compact and open sets). 

Let $\mu$ be a Radon measure on $\R^n$. Then 
\begin{enumerate}

\item For all $A \subseteq\R^n$, $\mu(A) = \inf\{\mu(U) \mid A \subseteq U, U$ open $\}$. 

\item For all $\mu$-measurable $A \subseteq\R^n$, we have $\mu(A) = \sup\{\mu(K) \mid K\subseteq A, K$ compact $\}$. 

\end{enumerate}

\proof

Shortly. 

Note: If $\mu$ is the Lebesgue measure, we define the outer measure as
\begin{align*}
\mu(A) & = \inf\{\sum\seq{k}(b_k - a_k) \mid A \subseteq\cupk(a_k, b_k) \} \\
& = \inf\{\sum\seq{k}(b_k - a_k)\mid A \subseteq \cupk\, [a_k, b_k), [a_i, b_i) \cap [a_j, b_j) = \varnothing\text{ if } i\neq j\} \\
\end{align*}

\rem Let $X$ be a topological space, and let $\mu$ be a measure on $X$. If $A \subseteq X$ is such that for all $\varepsilon>0$, there exists a $\mu$-measurable $A_\varepsilon\subseteq A$, such that $\mu(A\setminus A_\varepsilon)<\varepsilon$. Then $A$ is $\mu$-measurable. 

\proof of remark. 

Take $\varepsilon = \frac{1}{k}$. By part 1, there exists $A_k \subseteq A$ such that $0\leq\mu(A)-\mu(A_k)<\frac{1}{k}$. 

Let $b = \cupk A_k$, and note that $B \subseteq A$, $B$ is $\mu$-measurable, and $\mu(A)-\frac{1}{k} \leq \mu(A_k) \leq \mu(B) $ for all $k \in \N$. 

This implies that $\mu(B) = \mu(A), B \subseteq A$. 

Thus, $\mu(A) = \mu(A\cap B) + \mu(A\setminus B) = \mu(B) + \mu(A\setminus B)$. 

Since $\mu(A) = \mu(B)$, this implies that $\mu(A\setminus B) = 0$, i.e. $A\setminus B$ is $\mu$-measurable. 

So $A = B \cup (A \setminus B)$ is $\mu$-measurable. 

\qed

We are now prepared for a proof of the theorem. 

\proof

\begin{enumerate}

\item If $\mu(A)=\oo$, then this is trivial. So assume $\mu(A)<\oo$. If $A$ is Borel, we use part 2 of theorem 1. 

We have an open $U_\varepsilon\subseteq\R^n$ such that $A \subseteq U_\varepsilon$, and $\mu(U_\varepsilon\setminus A)<\varepsilon$. 

Thus $\mu(A)\leq\mu(U_\varepsilon)\leq\mu(A) + \mu(U_\varepsilon\setminus A) < \mu(A) + \varepsilon$. 

So we are odne for Borel sets. If $A$ is not Borel, then there exists a Borel $B \subseteq \R^n$ such that $A \subseteq B$ and $\mu(A) = \mu(B)$. 

Note: For the above proof, we used a previous theorem, and the fact that $\mu$ is Borel-regular. 

\item Lets prove that $\mu(A) = \sup\{\mu(C)\mid C \subseteq A, C$ closed $\}$. 
We have two cases:

\begin{enumerate}[label=(\roman*)]

\item $\mu(A)<\oo$. In this case, consider $\nu = \mu|_A$. $\nu$ is a finite Radon measure. We apply part 1 to $A^c$. There exists an open $U_\varepsilon\subseteq\R^n$ such that $\R^n\setminus A \subseteq U_\varepsilon$ and $\nu(U_\varepsilon)<\nu(A^c) + \varepsilon = \varepsilon$. 

Set $C_\varepsilon = U_\varepsilon^c$, which is closed. Note that $C_\varepsilon\subseteq A$ and $\mu(A\setminus C_\varepsilon) = \mu(A \cap U_\varepsilon)= \nu(U_\varepsilon) < \varepsilon$. 

Since $C \subseteq A$, $\mu(C_\varepsilon)\leq\mu(A)$. By countable subadditivity, $\mu(A)\leq\mu(C_\varepsilon) + \mu(A\setminus C_\varepsilon) < \mu(C_\varepsilon) + \varepsilon$. 

\item Next time!

\end{enumerate}

\end{enumerate}

\qed

\section*{Lecture 6, 1/31/23}

\rem 

Let $\mu$ be a Borel measure on $X$. If for every $A \subseteq X$ one has $\mu(A) = \inf\{\mu(B) \mid A \subseteq B, B$ Borel $\}$, then $\mu$ has to be Borel-regular. 

\proof of remark. 

Take $B_k\supseteq A$ such that $\mu(B_k) < \mu(A) + \frac{1}{k}$. Let $B = \capk B_k$. Note $B$ is Borel, $A \subseteq B$, and $\mu(A)\leq\mu(B)\leq\mu(B_k)<\mu(A) + \frac{1}{k}$. So $\mu(A) = \mu(B)$. 

\qed 

\proof of theorem from last time. 

We showed that if $\mu(A)<\oo$, then $\mu(A) = \sup\{\mu(C)\mid C \subseteq A, C$ closed $\}$. 

If $\mu(A) = \oo$, write $\R^n = \cupk R_k$, where $R_k = \{x\in\R^n\mid k \leq \norm{x} < k + 1\}$. Thus $A = \cupk A \cap R_k$. 

For all $k, \mu(A\cap R_k) \leq \mu(R_k) < \oo$. So there exists $C_k \subseteq A\cap R_k$ such that $\mu(C_k) > \mu(A\cap R_k) - \frac{1}{2^k}$. 

Thus $\mu(\cupk C_k) = \sup\seq{k}\mu(C_k) \geq \sum\seq{k}*\mu(A\cap R_k) - \frac{1}{2^k}) \geq \mu(A) - 2 = \oo$. 

This implies that $\lim_{m\to\oo}\mu(\cupk[m]C_k = \mu(\cupk C_k) = \oo$. 

This proves the theorem for closed sets. 

Now we prove the theorem for compact sets. 

Case 1: $\mu(A)<\oo$. For all $\varepsilon > 0$, there exists a closed set $C_\varepsilon\subseteq A$ such that $\mu(C_\varepsilon) > \mu(A) - \varepsilon$. Consider $K_m = C_\varepsilon\cap B_m$, where $B_m = \{x\in\R^n \mid \norm{x}\leq m\}$. 

Note $K_m$ is compact. 

Thus $\lim_{m\to\oo}\mu(K_m) = \mu(\cupk K_m) = \mu(C_\varepsilon) > \mu(A) - \varepsilon$. 

Case 2: $\mu(A) = \oo$. For all $m \in \N$, there exists a closed $C_m\subseteq A$ such that $\mu(C_m)\geq m$. Apply the same procedure. 

\qed

\subsubsection*{\underline{Covering theorems} (Vitali's and Besicovitch)}

Notation: we will work in $\R^n$. Closed balls will be denoted by $B$. For a given closed ball $B = B_r(x) = \{y\in\R^n \mid \norm{x - y} \leq r\}$, $\hat{B} = cB = \{y\in\R^n \mid \norm{x - y} \leq cr\} = B_{cr}(x)$. 

\defn

Let $A \subseteq \R^n$ and let $\ms{F} = \{B\subseteq\R^n\}$ be a family of balls. 
\begin{enumerate}
\item $\ms{F}$ is a \underline{cover of $A$} if $A \subseteq \cup_{B\in\ms{F}}B$. 

\item $\ms{F}$ is a \underline{fine cover of $A$} if for all $x \in A$ and $\varepsilon>0$, there exists a $B\in\ms{F}$ such that $x \in B$ and $\diam(B) < \varepsilon$. Alternatively, for all $x \in X$, $\inf\{\diam(B) \mid x \in B\} = 0$. 

\end{enumerate}

\thm (Vitali's Covering Theorem)

Let $\ms{F}$ be a collection of nondegenerate closed balls in $\R^n$ with diameters uniformly bounded, i.e. $\sup\{\diam(B) \mid B \in \ms{F}\} < \oo$. Then there exists a subcollection of countably many disjoint balls $\{\hat{B}_i\}\seq{i}$, such that $\cup_{b\in B}B \subseteq \cupi\hat{B}_i$

\proof 

Denote $D = \sup\{\diam(B) \mid B \in \ms{F}\}$ and consider $\ms{F}_k = \{B\in\ms{F}\mid\frac{D}{2^k} < \diam(B) \leq \frac{D}{2^{k - 1}}\}$. Let $G_1 \subseteq \ms{F}_1$ be a maximal disjoint subcollection of balls in $\ms{F}$ (we can produce this easily with Zorn's Lemma). It will be maximal in the sense that if we add another element, it will not be a disjoint set. 

Assume $G_1, \dots, G_{k - 1}$ have been chose. 

Let $G_k$ bew a maximal disjoint subcollection in $\ms{F}$ such taht the balls at $G_k$ do not intersect with the balls in $\cup_{i=1}^{k - 1}G_i$.

Set $G = \cupk G_k \subseteq \ms{F}$. Let $B \in \ms{F}_m$, i.e. $\frac{D}{2^m} < \diam(B) \leq \frac{D}{2^{m - 1}}$. 

Because $G_m$ is maximal, there exists $\bar{B} \in \cupi[m]G_i$ such that $B \cap\bar{B} = \varnothing$. Thus $\diam(\bar{B}) \geq \frac{D}{2^m} \geq \frac{1}{2}\diam(B)$. Thus $B \subseteq \hat{\bar{B}}$. 

\section*{Lecture 7, 2/2/23}

\cor

Let $A \subseteq \R^n$, and let the collection $\ms{F}$ of nondegenerate closed balls be a fine cover of $A$ such that $\sup\{\diam(B)\mid B\in\ms{F}\} < \oo$. 

Then for any finite number of balls $B_1, B_2, \dots, B_m\in\ms{F}$, one has
\[
A\setminus\cupi[m]B_i \subseteq \cup_{B\in G\setminus\{B_1, \dots, B_m\}}\hat{B}
\]
where $G$ is the disjoint collection of balls guaranteed by Vitali's theorem. 

\proof

Assume $x \in A\setminus\cupi[m]B_i$. Then $x\not\in\cupi[m]B_i$, so $d(x, \cupi[m]B_i) > 0$, as $B_i$ is closed for all $i$, and the finite union of closed sets is closed. 

Let $d = d(x, \cupi[m]B_i)$. Because $x \in A$, there exists a ball $B = B_r(y) \in \ms{F}$ such that $x\in B_r(y)$ and $2r<d$. This gives us that $B \cap \cupi[m]B_i = \varnothing$. By the construction of $G$, there exists $\bar{B} \in G$ such that $B \cap \bar{B} = \varnothing$ and $B \subseteq \hat{\bar{B}}$. Now, $\bar{B}\neq B_i, i = 1, 2, \dots, m$, and therefore $x \in B \subseteq\hat{\bar{B}}\subseteq \cup_{\bar{\bar{B}}\in G\setminus\{B_1, \dots, B_n\}}\hat{\bar{\bar{B}}}$. 

\thm (Filling open sets with closed balls)

Let $U \subseteq \R^n$ be open, and let $\delta > 0$. Then there is a countable collection $G$ of nondegenerate closed, disjoint balls, such that 
\[
\sup\{\diam(B) \mid B \in G\} \leq \delta
\]
and $\ms{L}^n(U\setminus\cupi B_i) = 0$, where $\ms{L}^n$ denotes $n$-dimensional Lebesgue measure. Here, $G = \{B_i\}\seq{i}$. 

\proof
\,

\subsubsection*{Case 1: $\ms{L}^n(U) < \oo$}

Consider the collection of nondegenerate closed balls $\ms{F} = \{ B \subseteq U \mid \diam(B)\leq\delta\}$. Because $U$ is open, $\cup_{B\in\ms{F}}B = U$. By Vitali's covering theorem, there exists a countable family $G$ of disjoint balls such that $U\subseteq\cupi\hat{B_i}$. So
\[
\ms{L}^n(U)\leq\ms{L}^n(\cupi\hat{B}_i) \leq \sum\seq{i}\ms{L}^n(\hat{B_i})
\]
By countable subadditivity, $\ms{L}^n(U) \leq 5^n\sum\seq{i}\ms{L}^n(B_i) = 5^n\ms{L}^n(\cupi B_i)$. So
\[
\ms{L}^n(U\setminus\cupi B_i) = \ms{L}^n(U) - \ms{L}^n(\cupi B_i) \leq (1 - \frac{1}{5^n})\ms{L}^n(U)
\]
Now
\[
\lim_{m\to\oo}\ms{L}^n(U\setminus\cupi[m]B_i) = \ms{L}^n(U\setminus\cupi B_i) \leq (1 - \frac{1}{5^n})\ms{L}^n(U)
\]
So there exists an index $m_1 \in \N$ such that $\ms{L}^n(U \setminus \cup_{i=1}^{m_1} B_i ) \leq (1 - \frac{1}{2\cdot 5^n})\ms{L}^n(U)$. 

Consider $U_2 = U \setminus \cup_{i=1}^{m_1}B_i$ and the new collection $\ms{F}_i = \{B\mid B \subseteq U_2, \diam(B)\leq\delta\}$. Then 
\[
\ms{L}^n(U_2) \leq q\cdot\ms{L}^n(U) < \oo
\]
So there exist disjoint closed $B_{m_{1 + 1}},\cdots, B_{m_2} \in \ms{F}_2$ such that
\[
\ms{L}^n(U_2 \setminus \cup_{i=m_1 + 1}^{m_2}B_i) \leq q\ms{L}^n(U)
\]
So $\ms{L}^n(U\setminus\cup_{i=1}^{m_2})\leq q^2\ms{L}^n(U)$. 

\underline{$k$-th step}

There are disjoint balls $B_1, B_2, \dots, B_{m_k} \subseteq U$ such that
\[
\ms{L}^n(U\setminus \cup_{i=1}^{m_k}) \leq q^k\ms{L}^k(U)
\]
So
\[
\ms{L}^n(U \setminus \cupi B_i) \leq \ms{L}^n(U\setminus\cup_{i=1}^{m_k}) \leq q^k\ms{L}^n(U)
\]
The above is true for every $k$, so it follows that $\ms{L}^n(U \setminus \cupi B_i) = 0$. $G = \{B_i\}\seq{i}$. This completes the proof in the case of $\ms{L}^n(U)<\oo$. 

\subsubsection*{Case 2, $\ms{L}^n(U) = \oo$}

Consider $U_m = U \cap \{x\in \R^n: m - 1 < |x| < m\}$, $m =1, 2, \dots$. We know $\ms{L}^n(\del B_r(x)) = 0$ for all $B_r(x) \subseteq \R^n$ (this will be a homework problem). 

\qed

``You can go look at the proof of Besicovitch in the book , but to be honest I never read that proof." - Davit


\thm (Besicovitch's covering theorem) 

There exists a number $N_n$ that depends only on the space dimension $n$, with the following property. 

If $\ms{F}$ is any collection of nondegenerate closed balls in $\R^n$, with 
\[
\sup\{\diam(B)\mid B \in \ms{F}\}<\oo
\]
and $A = \{x \mid \exists B_r(x) \in \ms{F}$ (the centers of the balls). 

Then there exists $N_n$ countable collections $G_1, G_2, \dots, G_{N_n}$, each of which are disjoint (as in, the balls in each collection are disjoint. This does not mean $G_i \cap G_j = \varnothing$) in $\ms{F}$ such that
\[
A \subseteq \cup_{i=1}^{N_n}(\cup_{B\in G_i}B)
\]

\proof

In the book

\qed 

\thm (More on filling open sets with Balls)

Let $\mu$ be a Borel measure on $\R^n$, and let $\ms{F}$ be any collection of nondegenerate closed balls. Let $A = \{x\mid \exists B_r(x) \in \ms{F}$ (again, the set of centers). 

Assume $\mu(A)<\oo$ (we do not assume $A$ is $\mu$-measurable) and $\inf\{r:B_r(a) \in \ms{f}\} = 0$ for any $a \in A$. 

Then for every open set $U \subseteq \R^n$, there exists a countable collection $G$ of disjoint balls in $\ms{F}$ such that
\begin{enumerate}

\item $\cup_{B\in G}B\subseteq U$ 

\item $\mu(A \cap U \setminus \cup_{B\in G}B) = 0$. 

\end{enumerate}

\proof

Consider the collection $\ms{F}_1 = \{B \mid B \in \ms{F}, B \subseteq U, \diam(B)\leq 1\}$. 

$A \cap U = \{x \mid \exists B_r(x) \in \ms{F}_1\}$. 

Apply the theorem to $\ms{F}_1$. Then there exist $G_1, G_2, \dots, G_{N_n}$ countable collections of disjoint balls (each) in $\ms{F}_1$ such that
\[
A \cap U \subseteq \cup_{i=1}^{N_n}(\cup_{B\in G_1}B)
\]
Then $\mu(A \cap U) \leq \sum_{i=1}^{N_n}\mu\left((A \cap U) \cap (\cup_{B\in G_i}B)\right)$. So there exists an index $k\in\{1, 2, \dots, N_n\}$ such that
\[
\mu\left((A \cap U) \cap (\cup_{B\in G_k}B)\right) \geq \frac{1}{N_n}\mu(A \cap U)
\]

Write $G_k = \{B_i\}\seq{i}$. Then
\[
\mu\left((A \cap U) \cap (\cupi B_i)\right) \geq \frac{1}{N_n}\mu(A \cap U)
\]
Let $q = 1 - \frac{1}{2N_n}$. 

$\mu(A \cap U) \leq \sup_{i=1}^{N_n}\mu\left((A \cap U) \cap (\cup_{B\in G_iB}\right)$. 

There exists an index $k \in \{1, 2, \dots, N_n\}$ such that
\[
\mu\left((A \cap U) \cap (\cup_{B\in G_k}G)\right) \geq \frac{1}{N_n}\mu(A \cap U)
\]

\section*{Lecture 8, 2/7/23}

We continue with the proof. Some review. 

$\mu$ is a Borel measure on $\R^n$. $\ms{F} = \{B\mid B \subseteq \R^n, B$-nondegenerate$\}$. $A = \{a\in\R^n\mid \exists B_r(a)\in\ms{F}\}$. Assume $\mu(A)<\oo$. Assume $\inf\{r\mid B_r(a)\in\ms{F}\} =0$ for all $a\in A$.

Then for all open $U\subseteq\R^n$, there exists $G = \{B_i\}\seq{i}\subseteq\ms{F}$ collection of disjoint balls such that $\mu(A \cap U \setminus \cupi B_i) = 0$, $\cupi B_i \subseteq U$.  

Let $\ms{F}_1 = \{B\in\ms{F}\mid B\subseteq U, \diam(B)\leq1\}$. 

New set of centers $= A \cap U$. By Besicovitch, there exist $N_n$ collections $G_1, G_2, \dots, G_{N_N}\subseteq\ms{F}_1$ such that $A \cap U \subseteq\cupi\cup_{B\in G_i}B$. 

Then $\mu(A \cap U) \leq \sum_{i=1}^{N_n}\mu(\cup_{B\in G_i}(B\cap A\cap U))$.

So there exists an index $k\in\{1, 2, \dots, N_n\}$ such that
\[
\mu((A\cap U) \cap (\cup_{B\in G_k}B))\geq\frac{1}{N_n}\mu(A \cap U)
\]
Let $\nu = \mu|_A$ - Borel.
Let $G_k = \{B_i\}\seq{i}$. Then $\mu((A \cap U) \cap (\cupi B_i)) = \nu(U \cap \cupi B_i) = \lim_{n\to\oo}\nu(U \cap \cupi[m]B_i)$. So there exists $m_1 \in \N$ such that 
\[
\nu(U\cap \cup_{i=1}^{m_1}B_i) = \mu((A\cap U)\cup_{i=1}^{m_1}B_i) \geq \frac{1}{2N_n}\mu(A \cap U)
\]
So 
\begin{align*}
\mu(A \cap U \setminus \cup_{i=1}^{m_i}B_i & = \mu(A \cap U) - \mu(A \cap U \cap \cup_{i=1}^{m_1}B_i) \\
& \leq \underbrace{(1 - \frac{1}{2N_n})}_{0<q<1}\mu(A \cap U) \\
\end{align*}

Let $U_2 = U \setminus \cup_{i=1}^{m_1}B_i$, $\ms{F}_2 = \{B\in\ms{F}_1 \mid B \subseteq U_2, \diam(B)\leq1\}$. 

\underline{$k$th step}

We have $B_{m_{n - 1} + 1}, \dots, B_{m_k}\in\ms{F}_k$ such that
\[
\mu(A \cap U \setminus \cup_{i=1}^{m_k}) \leq q^k\mu(A \cup U)
\]

Let $G = \{B_i\}$. 



\qed

\subsection*{\underline{Differentiation of Radon Measures}}

\defn

Let $\mu$ and $\nu$ be Radon measures on $\R^n$. Define, for any $x \in \R^n$, 
\underline{the upper derivative of $\mu$ with respect to $\nu$} by
\[
\bar{D}_{\mu}\nu(x) = \begin{cases} \limsup_{r\to0^+}\frac{\nu(B_r(x))}{\mu(B_r(x))} & \text{ if }\mu(B_r(x)) > 0, \forall r > 0 \\ +\oo & \mu(B_r(x)) = 0\text{ for some }r\\
\end{cases}
\]
The \underline{lower derivative} is defined similarly:
\[
\underline{D}_{\mu}\nu(x) = \begin{cases} \liminf_{r\to0^+}\frac{\nu(B_r(x))}{\mu(B_r(x))} & \text{ if }\mu(B_r(x)) > 0, \forall r > 0 \\ +\oo & \mu(B_r(x)) = 0\text{ for some }r\\
\end{cases}
\]

$\bar{D_\mu}\nu, \underline{D}_\mu\nu:\R^n\to[0,\oo]$. These are sometimes also called the \underline{upper/lower density}. 

We say that \underline{$\nu$ is differentiable with respect to $\mu$ at the point $x$} if $\bar{D}_\mu\nu(x) = \underline{D}_\mu\nu(x) < \oo$

This leads to several questions/goals: 

\begin{enumerate}

\item Study the set where $\underline{D}_\mu\nu(x) = \bar{D}_\mu\nu(x) < \oo$. Is it $\mu$-a.e.?

\item Do we have $\nu(B) = \int_BD_\mu\nu(x)\,d\mu$ for Borel sets $B \subseteq\R^n$?

\end{enumerate}

For question 1, the answer is yes, $\mu$-almost everywhere in $\R^n$. The answer to question 2 is also yes, subject to the additional condition $\nu<<\mu$. 

\lem

Let $\mu$ and $\nu$ be Radon measures on $\R^n$. Let $0 < \alpha < +\oo$. 

\begin{enumerate}[label=(\roman*)]

\item If $A \subseteq \{x\in\R^n\mid\underline{D}_\mu\nu(x)\leq\alpha\}$, then $\nu(A)\leq\alpha\mu(A)$

\item If $A \subseteq \{x\in\R^n\mid\bar{D}_\mu\nu(x)\geq\alpha\}$, then $\nu(A)\geq\alpha\mu(A)$. 

\end{enumerate}

\proof

We can assume without loss of generality that $\mu(\R^n),\nu(\R^n)<\oo$. This is because $\nu(A \cap B_R(0)) \leq \alpha\mu(A \cap B_R(0))$, and as $R\to+\oo$, the left converges to $\nu(A)$, and the right converges to $\alpha\mu(A)$, $B_R(0) = \{|x|<R\}$. 

Fix $\varepsilon>0$. 

\begin{enumerate}[label=(\roman*)]

\item Let $U$ be any open set such that $A \subseteq U$. Consider the collection of closed balls $\ms{F} = \{B_r(x) \subseteq U \mid x\in A,\nu(B_r(x)) \leq (\alpha + \varepsilon)\mu(B_r(x)), \diam(B)\leq1\}$

For any $a \in A,$ we have $\inf\{r\mid B_r(a)\in\ms{F} \} = 0$ because $\underline{D}_\mu\nu(x)\leq\alpha$. Set of centers $=A$. 

By the theorem we just proved, there exists a countable collection $G = \{B_i\}\seq{i}$ of disjoint balls in $\ms{F}$ such that
\[
\nu(A\cap U \setminus\cupi B_i) = 0
\]
So
\[
\nu(A)\leq\nu(\cupi B_i) + \nu(A\setminus \cupi B_i) = \nu(\cupi B_i)
\]
By disjointness, this is equal to 
\begin{align*}
\sum\seq{i}\nu(B_i) & \leq\sum\seq{i}(\alpha+\varepsilon)\mu(B_i) \\
& = (\alpha + \varepsilon)\mu(\cupi B_i) \\
& \leq (\alpha + \varepsilon)\mu(U) \\
\end{align*}

So $\nu(A)\leq(\alpha+\varepsilon)\mu(U)$ for all $\varepsilon > ), U \supseteq A$. 

In the limit as $\varepsilon\to0^+$, we have $\nu(A)\leq]alpkha\mu(U)$ for all $U \supseteq A$. So $\nu(A) \leq \alpha\inf\{\mu(U)\mid A \subseteq U, U$-open$\} = \alpha\mu(A)$. 

This completes the proof of 1. Proof of 2 is similar? 

\qed

\end{enumerate}

\thm Let $\mu$ and $\nu$ be Radon measures on $\R^n$. Then

\begin{enumerate}[label=(\roman*)]

\item $\nu$ is differentiable with respect to $\mu$ almost everywhere in $\R^n$. 

\item $\underline{D}_\mu\nu(x) = \bar{D}_\mu\nu(x)<\oo$ $\mu$-almost everywhere in $\R^n$. 

\item $D_\mu\nu$ is $\mu$-measurable. 

\end{enumerate}

\proof

Let $I = \{x\in\R^n \mid \bar{D}_\mu\nu(x) = \oo\}$. 

With the lemma we have just proven, it is easy to see that $\mu(I) = 0$. 

Assume $\mu(\R^n),\nu(\R^n) < \oo$. Fix any $\alpha>0$. Then $I = \{x\in\R^n\mid\bar{D}_\mu\nu(x)\geq\alpha\}$. So $\nu(I)\geq\alpha\mu(I)$, so
\[
\mu(I)\leq\frac{1}{\alpha}\nu(I)\leq\frac{\nu(\R^n)}{\alpha}
\]
As let let $\alpha\uparrow+\oo$, we get $\mu(I)<\oo$. 










\end{document}